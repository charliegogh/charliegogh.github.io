(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{247:function(t,n,e){"use strict";e.r(n);var s=e(0),o=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"状态共享"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#状态共享"}},[t._v("#")]),t._v(" 状态共享")]),t._v(" "),e("ol",[e("li",[t._v("如果应用不够大,避免代码冗余,使用vue2.6新增的Observable API 来实现简单的跨组件数据共享")])]),t._v(" "),e("p",[t._v("首先创建一个store.js，包含一个store和一个mutations，分别用来指向数据和处理方法。")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('import Vue from "vue";\n\nexport const store = Vue.observable({ count: 0 });\n\nexport const mutations = {\n  setCount(count) {\n    store.count = count;\n  }\n};\n')])])]),e("p",[t._v("然后在App.vue里面引入这个store.js，在组件里面使用引入的数据和方法")]),t._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('<template>\n  <div id="app">\n    <img width="25%" src="./assets/logo.png">\n    <p>count:{{count}}</p>\n    <button @click="setCount(count+1)">+1</button>\n    <button @click="setCount(count-1)">-1</button>\n  </div>\n</template>\n\n<script>\nimport { store, mutations } from "./store";\nexport default {\n  name: "App",\n  computed: {\n    count() {\n      return store.count;\n    }\n  },\n  methods: {\n    setCount: mutations.setCount\n  }\n};\n<\/script>\n\n<style>\n')])])])])}),[],!1,null,null,null);n.default=o.exports}}]);